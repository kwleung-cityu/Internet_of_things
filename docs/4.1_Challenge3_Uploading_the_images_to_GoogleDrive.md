# Challenge 3: Uploading the images to Google Drive

This is the most complex part of the challenge, as it involves authenticating with Google's services. The `ESP32_Camera_SDcard_GoogleDrive` project uses a Google Apps Script to act as an intermediary, which simplifies the process on the microcontroller.

1.  **Set up Google Apps Script:**
    -   You need to create a Google Apps Script that is deployed as a web app. This script will receive the image data from your ESP32 via an HTTP POST request and then use Google's native APIs to save the file to your Google Drive.
    -   The script handles the OAuth2 authentication on Google's servers, so your ESP32 doesn't need to manage complex tokens.
    -   The `google_drive.cpp` file contains the logic to send the photo to the URL of your deployed Apps Script. You will need to replace the placeholder URL with your own.

2.  **ESP32 Code for Uploading:**
    -   The code will first take a picture and save it to the SD card.
    -   Then, it reads the image file from the SD card.
    -   It creates an HTTP client to send a `multipart/form-data` POST request to your Google Apps Script URL.
    -   The body of the request contains the image data.
    -   The Apps Script receives this data, creates a file in a specific folder in your Google Drive, and returns the URL or ID of the newly created file.

### Integrating with ThingSpeak

Once the image is in Google Drive and you have its public link, the final step is to post that link to your ThingSpeak channel.

1.  **Add a Field to ThingSpeak:**
    In your ThingSpeak channel, you might want to use one of the fields to store the URL of the image.

2.  **Update the ESP32 Code:**
    -   After the `google_drive.cpp` code successfully uploads the file and gets back a link, you will use the `ThingSpeak.h` library to update your channel.
    -   Use `ThingSpeak.setField()` to set the image URL to the appropriate field.
    -   Use `ThingSpeak.writeFields()` to send the update.

This creates a powerful link between your sensor data and visual evidence, allowing you to see a snapshot of your plant's condition at the exact moment the moisture data was recorded.
