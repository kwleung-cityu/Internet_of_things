# Challenge 2: Adding a camera to take pictures of your plant

## Hardware Setup for the Camera

The Freenove ESP32-S3 board comes with a camera module. To get it working, you need to connect it correctly. The camera connects to a specific set of pins on the board.

1.  **Identify the Camera Connector:** Locate the camera connector on the ESP32-S3 board. It's a small, flat flex cable connector.
2.  **Connect the Camera:** Carefully insert the camera's ribbon cable into the connector. Ensure the blue tab on the cable is facing away from the board and the contacts are facing down. Secure the latch on the connector.

### Software for the Camera Web Server

The goal is to run a web server on the ESP32-S3 that streams video from the camera, which you can view in a web browser. We will use the `Sketch_07.1_CameraWebServer` example as a reference.

1.  **Select the Correct Camera Model:**
    In the `Sketch_07.1_CameraWebServer.ino` file, you need to uncomment the line that defines the camera model for your board. For the Freenove ESP32-S3 board, the correct model is `CAMERA_MODEL_ESP32S3_CAM_LCD`.

Make sure this line is active in your `.ino` file:
```cpp
#define CAMERA_MODEL_ESP32S3_CAM_LCD
```

    And ensure all other camera model definitions are commented out. This definition tells the compiler to use the correct pin configuration from the `camera_pins.h` file.

2. **Enter Wi-Fi Credentials:**
   Just like with the ThingSpeak project, you need to provide your Wi-Fi network's SSID and password. Find these lines in `Sketch_07.1_CameraWebServer.ino` and update them:

   ```cpp
   const char* ssid = "REPLACE_WITH_YOUR_SSID";
   const char* password = "REPLACE_WITH_YOUR_PASSWORD";
   ```

3. **Upload and Run:**

   -   In the Arduino IDE, make sure you have selected the **ESP32S3 Dev Module** board and the correct COM port.
   -   Upload the sketch to your board.
   -   Open the Serial Monitor and set the baud rate to **115200**.
   -   When the board connects to your Wi-Fi, it will print its IP address to the Serial Monitor.

   ```
   Camera Ready! Use 'http://192.168.1.123' to connect
   ```

4. **View the Video Stream:**

   -   Open a web browser on a device connected to the same Wi-Fi network.
   -   Enter the IP address shown in the Serial Monitor.
   -   You should see a web page with controls for the camera and a live video stream.

This completes the second challenge, giving your Smart Flowerpot the ability to visually monitor your plant.

## Storing Photos on an SD Card

Before uploading to the cloud, it's a good practice to save the captured image to a local storage medium like an SD card. This provides a backup and decouples the image capture process from the upload process.

1.  **Hardware: SD Card Module:**
    You will need an SD card module to connect to your ESP32-S3. These modules typically communicate over the SPI protocol.
    -   Connect the SD card module's VCC to **3.3V**.
    -   Connect GND to **GND**.
    -   Connect the SPI pins (MISO, MOSI, SCK, CS) to the corresponding SPI pins on the ESP32-S3. On the Freenove board, the default SPI pins are:
        -   **MOSI:** GPIO 35
        -   **MISO:** GPIO 37
        -   **SCK:** GPIO 36
        -   **CS (Chip Select):** GPIO 34 (this can often be changed in the code)

2.  **Software: SD Library:**
    The `SD.h` library for Arduino works with the ESP32. The code in `sd_read_write.cpp` from the example project shows how to initialize the SD card and save a file. The camera capture logic will provide a buffer (`fb`) containing the image data, which can then be written to a file on the card.
